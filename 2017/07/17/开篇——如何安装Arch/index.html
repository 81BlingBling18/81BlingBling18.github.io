<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="baidu-site-verification" content="L6Lm9d5Crl"/>
  
  
  
  
  <title>开篇-如何安装Arch | Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Linux是每个人都绕不过去的坑，在之前为了装Arch作者也踩了好多好多好多好多坑，所以装好arch之后就有这么一个想法，写一篇小白都能看懂的教程，那么过去遇到的困难也就有那么一点意义，同时也是为了防止自己以后忘了，再回来看看。">
<meta property="og:type" content="article">
<meta property="og:title" content="开篇-如何安装Arch">
<meta property="og:url" content="http://yoursite.com/2017/07/17/开篇——如何安装Arch/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="Linux是每个人都绕不过去的坑，在之前为了装Arch作者也踩了好多好多好多好多坑，所以装好arch之后就有这么一个想法，写一篇小白都能看懂的教程，那么过去遇到的困难也就有那么一点意义，同时也是为了防止自己以后忘了，再回来看看。">
<meta property="og:updated_time" content="2017-07-17T23:41:04.860Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="开篇-如何安装Arch">
<meta name="twitter:description" content="Linux是每个人都绕不过去的坑，在之前为了装Arch作者也踩了好多好多好多好多坑，所以装好arch之后就有这么一个想法，写一篇小白都能看懂的教程，那么过去遇到的困难也就有那么一点意义，同时也是为了防止自己以后忘了，再回来看看。">
  
    <link rel="alternative" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="icon" href="/img/favicon.png">
  
  
  <link rel="stylesheet" href="//cdn.bootcss.com/animate.css/3.5.0/animate.min.css">
  
  <link rel="stylesheet" href="/css/style.css">
  <link rel="stylesheet" href="/font-awesome/css/font-awesome.min.css">
  <link rel="apple-touch-icon" href="/apple-touch-icon.png">
  
  
      <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  
  <!-- 加载特效 -->
    <script src="/js/pace.js"></script>
    <link href="/css/pace/pace-theme-flash.css" rel="stylesheet" />
  <script>
      var yiliaConfig = {
          fancybox: true,
          animate: true,
          isHome: false,
          isPost: true,
          isArchive: false,
          isTag: false,
          isCategory: false,
          open_in_new: false
      }
  </script>
</head>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
    <header id="header" class="inner">
        <script src="http://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js"></script>
        <a href="/" class="profilepic">
            
            <img lazy-src="/img/avatar.png" class="js-avatar">
            
        </a>
        <hgroup>
          <h1 class="header-author"><a href="/">QiMeng Wang</a></h1>
        </hgroup>
        
        
            <form>
                <input type="text" class="st-default-search-input search" id="local-search-input" placeholder=" Search...">
            </form>
            <div id="local-search-result"></div>
        
        
            <script type="text/javascript">
                (function() {
                    'use strict';
                    function getMatchData(keyword, data) {
                        var matchData = [];
                        for(var i =0;i<data.length;i++){
                            if(data[i].title.toLowerCase().indexOf(keyword)>=0) 
                                matchData.push(data[i])
                        }
                        return matchData;
                    }
                    var $input = $('#local-search-input');
                    var $resultContent = $('#local-search-result');
                    $input.keyup(function(){
                        $.ajax({
                            url: '/search.json',
                            dataType: "json",
                            success: function( json ) {
                                var str='<ul class=\"search-result-list\">';                
                                var keyword = $input.val().trim().toLowerCase();
                                $resultContent.innerHTML = "";
                                if ($input.val().trim().length <= 0) {
                                    $resultContent.empty();
                                    $('#switch-area').show();
                                    return;
                                }
                                var results = getMatchData(keyword, json);
                                if(results.length === 0){
                                    $resultContent.empty();
                                    $('#switch-area').show();
                                    return;
                                } 
                                for(var i =0; i<results.length; i++){
                                    str += "<li><a href='"+ results[i].url +"' class='search-result-title'>"+ results[i].title +"</a></li>";
                                }
                                str += "</ul>";
                                $resultContent.empty();
                                $resultContent.append(str);
                                $('#switch-area').hide();
                            }
                        });
                    });
                })();
            </script>
        
        
            <div id="switch-btn" class="switch-btn">
                <div class="icon">
                    <div class="icon-ctn">
                        <div class="icon-wrap icon-house" data-idx="0">
                            <div class="birdhouse"></div>
                            <div class="birdhouse_holes"></div>
                        </div>
                        <div class="icon-wrap icon-ribbon hide" data-idx="1">
                            <div class="ribbon"></div>
                        </div>
                        
                        
                        <div class="icon-wrap icon-me hide" data-idx="3">
                            <div class="user"></div>
                            <div class="shoulder"></div>
                        </div>
                        
                    </div>
                </div>
                <div class="tips-box hide">
                    <div class="tips-arrow"></div>
                    <ul class="tips-inner">
                        <li>菜单</li>
                        <li>标签</li>
                        
                        
                        <li>关于我</li>
                        
                    </ul>
                </div>
            </div>
        
        <div id="switch-area" class="switch-area">
            <div class="switch-wrap">
                <section class="switch-part switch-part1">
                    <nav class="header-menu">
                        <ul>
                        
                        </ul>
                    </nav>
                    <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fl github"  target="_blank" href="/xxxxx" title="github">github</a>
                            
                                <a class="fl weibo"  target="_blank" href="/xxxxxxxx" title="weibo">weibo</a>
                            
                                <a class="fl rss"  target="_blank" href="/atom.xml" title="rss">rss</a>
                            
                        </ul>
                    </nav>
                </section>
                
                <section class="switch-part switch-part2">
                    <div class="widget tagcloud" id="js-tagcloud">
                        
                    </div>
                </section>
                
                
                
                
                <section class="switch-part switch-part3">
                
                    <div id="js-aboutme">Android/HUST</div>
                </section>
                
            </div>
        </div>
    </header>
</div>

    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
      <div class="overlay">
          <div class="slider-trigger"></div>
          <h1 class="header-author js-mobile-header hide"><a href="/" title="回到主页">QiMeng Wang</a></h1>
      </div>
    <div class="intrude-less">
        <header id="header" class="inner">
            <a href="/" class="profilepic">
                
                    <img lazy-src="/img/avatar.png" class="js-avatar">
                
            </a>
            <hgroup>
              <h1 class="header-author"><a href="/" title="回到主页">QiMeng Wang</a></h1>
            </hgroup>
            
            <nav class="header-menu">
                <ul>
                
                <div class="clearfix"></div>
                </ul>
            </nav>
            <nav class="header-nav">
                <div class="social">
                    
                        <a class="github" target="_blank" href="/xxxxx" title="github">github</a>
                    
                        <a class="weibo" target="_blank" href="/xxxxxxxx" title="weibo">weibo</a>
                    
                        <a class="rss" target="_blank" href="/atom.xml" title="rss">rss</a>
                    
                </div>
            </nav>
        </header>                
    </div>
</nav>
      <div class="body-wrap"><article id="post-开篇——如何安装Arch" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a  href="/2017/07/17/开篇——如何安装Arch/" class="article-date">
      <time datetime="2017-07-17T23:32:11.000Z" itemprop="datePublished">2017-07-17</time>
</a>

    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      开篇-如何安装Arch
    </h1>
  


      </header>
      
      <div class="article-info article-info-post">
        

        
        <div class="clearfix"></div>
      </div>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>Linux是每个人都绕不过去的坑，在之前为了装Arch作者也踩了好多好多好多好多坑，所以装好arch之后就有这么一个想法，写一篇小白都能看懂的教程，那么过去遇到的困难也就有那么一点意义，同时也是为了防止自己以后忘了，再回来看看。<br><a id="more"></a></p>
<h1 id="开篇——如何安装Arch"><a href="#开篇——如何安装Arch" class="headerlink" title="开篇——如何安装Arch"></a>开篇——如何安装Arch</h1><hr>
<h2 id="为什么是Arch"><a href="#为什么是Arch" class="headerlink" title="为什么是Arch"></a>为什么是Arch</h2><p>​    装arch就像是组装积木，相比于Deepin和Ubuntu以及其他的一些发行版，arch并没有把所有的组件都给你装在一起，让你开箱即用，而是给你提供了不同的零件，让你一个一个把玩，选出自己喜欢的零件来组装自己的系统，我觉得这也是用linux的最大的一个乐趣。但是相对与Deepin和Ubuntu，arch安装的学习成本很高，而且网上的教程参差不齐，所以如果自己在网上找教程的话非常麻烦，本文也正是从这个出发点开始，想用一篇教程讲完所有的安装过程，希望能够大幅度的减少小白踩坑的时间，提高效率。</p>
<h2 id="几点建议"><a href="#几点建议" class="headerlink" title="几点建议"></a>几点建议</h2><ol>
<li>善用 tab，tab 在 linux 终端里有自动补全的功能，按两下 tab 则会出现所有可能的结果;</li>
<li>善用上下方向键，bash 会记录你之前的命令，当你输入两条类似命令时，请充分利用用</li>
<li>强大的心态，计算机这东西是死的，别认为它有黑魔法，它说你错了，那你肯定有地方错了，你如果每步都没错，你 arch 装不好是不可能的</li>
<li>善用备份（.bak）与注释（#号），这样在你出问题之后可以改回原样</li>
<li>多学英文，无英语，不 linux    </li>
</ol>
<h2 id="注"><a href="#注" class="headerlink" title="注"></a>注</h2><p> 这篇文章很大一部分参考了<strong>@Levi</strong>大神的文章，在此特别感谢。</p>
<h2 id="使用说明"><a href="#使用说明" class="headerlink" title="使用说明"></a>使用说明</h2><ul>
<li>这篇文章字会非常非常非常多，而且会有很多的说明，所以希望你能够耐心看完。</li>
<li>请看清是否有<strong>空格</strong> 。</li>
<li><strong>下文适用于全新安装arch</strong> ，也就是说如果你的机子上啥系统也没有，或者说你想删掉现有系统只安装arch，就往下看，<strong>如果你已经有Windows并且想安装Windows和arch双系统的话，请拉到最后面</strong>，会有专门的介绍。</li>
<li><strong>错误的操作可能会造成数据丢失</strong>，所以务必要看清每一步是怎么做的。</li>
<li>本文中所有命令用#开始，但是实际输入时<strong>不用输入#</strong>，仅作为是一个标志。</li>
</ul>
<h2 id="开始安装吧"><a href="#开始安装吧" class="headerlink" title="开始安装吧"></a>开始安装吧</h2><h3 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h3><h4 id="关闭BIOS-关闭安全启动"><a href="#关闭BIOS-关闭安全启动" class="headerlink" title="关闭BIOS 关闭安全启动"></a>关闭BIOS 关闭安全启动</h4><ul>
<li>推荐 Windows 下用 ISO2USB 写入 iso 到 U 盘，U 盘格式选择 FAT32（也可以使用usbwriter，<strong>不要使用ultraiso</strong>，ultriso写入之后貌似不能启动）</li>
<li>找一个输完密码就能上网的 wifi，输入命令<code># wifi-menu -o</code> 然后在列表里选择你的 wifi，然后按两次回车，输入密码，再按回车。</li>
</ul>
<h3 id="分区"><a href="#分区" class="headerlink" title="分区"></a>分区</h3><p>​     这里主要使用 ext4 分区格式，因为这是现存的最好的文件系统，使用<code>lsblk</code>命令查看分区挂载情况，你会看到诸如/dev/sda1 之类的文字<br>​    用 parted 工具分区</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">#parted /dev/sda</div><div class="line">(parted) #mklabel gpt#建立 gpt 分区表</div><div class="line">(parted) #mkpart esp fat32 1MiB 513MiB#建立 esp 分区，大小为 512MiB</div><div class="line">(parted) #mkpart root ext4 513MiB 100%#建立根分区，大小为剩余所有空间</div><div class="line">(parted) #set 1 boot on #设置第一个分区即 sda1 为可启动</div><div class="line">#quit#退出</div><div class="line">（如果你是固态加机械的组合的话，请把下面这一段看完，默认 sda 为固态，sdb为机械，请根据自己的实际情况调整）</div><div class="line">#parted /dev/sdb</div><div class="line">(parted) #mklabel gpt#建立 gpt 分区表</div><div class="line">(parted) mkpart home ext4 1MiB 100% #建立 home 分区，大小为所有空间</div><div class="line">quit #退出</div><div class="line">lsblk #再次查看分区挂载情况</div></pre></td></tr></table></figure>
<h3 id="格式化"><a href="#格式化" class="headerlink" title="格式化"></a>格式化</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">#mkfs.vfat -F 32 /dev/sda1 &amp;&amp; mkfs.ext4 /dev/sda2 &amp;&amp; mkfs.ext4 /dev/sdb1</div></pre></td></tr></table></figure>
<h3 id="挂载"><a href="#挂载" class="headerlink" title="挂载"></a>挂载</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">（使用 chroot 的必要步骤，和 arch 的维修有关）</div><div class="line">#mkdir /mnt/esp #建立 esp 分区挂载目录（#）</div><div class="line">#mkdir /mnt/home #建立 home 分区挂载目录（如果你不是双硬盘请跳过此步）</div><div class="line">#mount /dev/sda2 /mnt #挂载根分区到 sda2 （#）</div><div class="line">实际在挂载下面两个分区时可能会报错，请重复执行有#号注释的两步</div><div class="line">#mount /dev/sda1 /mnt/esp#挂载 esp 分区到 sda1</div><div class="line">#mount /dev/sdb1 /mnt/home #挂载 home 分区到 sdb1</div><div class="line"></div><div class="line">注意挂载顺序，根分区一定要先挂载</div></pre></td></tr></table></figure>
<h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">#nano /etc/pacman.d/mirrorlist</div><div class="line"></div><div class="line">你将会看到一系列的服务器地址，请重点寻找[china]字样的</div><div class="line"></div><div class="line">配置源，这个配置会自动复制到安装好的系统中</div><div class="line">使用 alt+6 复制行 ctrl+u 粘贴行ctrl+k剪切行</div><div class="line">复制需要的源到最上面的注释（#号）下边，如 163 源，ustc 源，清华源（推荐只保留163和ustc的源，如果你所在学校也维护了镜像源的话，也可以用这个方法把本校镜像源加上，这样下载速度会很快），请去掉你复制内容里的#号</div><div class="line">#pacstrap /mnt base base-devel #安装基本系统</div></pre></td></tr></table></figure>
<h3 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">#genfstab -U -p /mnt &gt; /mnt/etc/fstab #生成 fstab</div><div class="line">#cp /mnt/etc/fstab /mnt/etc/fstab.bak#备份 fstab</div><div class="line">#nano /mnt/etc/fstab #编辑 fstab</div><div class="line">把 esp 的相关内容移到最上边，ctrl+k 剪切行，ctrl+u 粘贴行</div><div class="line">#arch-chroot /mnt #chroot 到目标系统</div></pre></td></tr></table></figure>
<h4 id="本地化设置"><a href="#本地化设置" class="headerlink" title="本地化设置"></a>本地化设置</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">#nano /etc/locale.gen #编辑 locale.gen 文件</div><div class="line">#en_US.UTF-8 UTF-8 #去掉注释</div><div class="line">#zh_CN.UTF-8 UTF-8 #去掉注释</div><div class="line">#locale-gen#生成指定的本地化文件</div><div class="line">#echo LANG=en_US.UTF-8 &gt; /etc/locale.conf #提交本地化选项（注意大写）</div></pre></td></tr></table></figure>
<h4 id="时区设置"><a href="#时区设置" class="headerlink" title="时区设置"></a>时区设置</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">#tzselect #查看可用的时区配置 选 asia 序号，然后选 shanghai 或者 xinjiang的序号</div><div class="line">#ln -s /usr/share/zoneinfo/Asia/Shanghai /etc/localtime #设置当前时区为 Shanghai</div><div class="line">#hwclock --systohc --utc #设置硬件时钟为 UTC（前面的两条横线每个均由两个减号构成）</div><div class="line">设置 root 密码</div><div class="line">#passwd 然后两次输入自己想设定的密码，输入时屏幕不会有任何显示，这是linux 一种安全措施</div></pre></td></tr></table></figure>
<h3 id="设置主机名"><a href="#设置主机名" class="headerlink" title="设置主机名"></a>设置主机名</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">#echo X &gt; /etc/hostname #X 替换为需要的名字，区分大小写</div><div class="line">#cp /etc/hosts /etc/hosts.bak #备份 host 文件</div><div class="line">#nano /etc/hosts #编辑/etc/hosts 添加同样的主机名</div><div class="line"></div><div class="line">127.0.0.1 localhost.localdomain localhost X</div><div class="line"></div><div class="line">::1 localhost.localdomain localhost X</div><div class="line">红色标注的 X 是你实际要输入的内容，其他内容文件中已经自带</div><div class="line"></div><div class="line">X 替换为需要的名字，区分大小写（注意留空格）</div></pre></td></tr></table></figure>
<h3 id="配置启动"><a href="#配置启动" class="headerlink" title="配置启动"></a>配置启动</h3><h4 id="复制内核文件到-esp-分区"><a href="#复制内核文件到-esp-分区" class="headerlink" title="复制内核文件到 esp 分区"></a>复制内核文件到 esp 分区</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">#cp /boot/vmlinuz-linux /esp/vmlinuz-linux</div><div class="line">#cp /boot/initramfs-linux.img /esp/initramfs-linux.img</div><div class="line">#cp /boot/initramfs-linux-fallback.img</div><div class="line">#/esp/initramfs-linux-fallback.img</div></pre></td></tr></table></figure>
<h4 id="安装并更新-efi-启动文件"><a href="#安装并更新-efi-启动文件" class="headerlink" title="安装并更新 efi 启动文件"></a>安装并更新 efi 启动文件</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">#bootctl --path=/esp install</div><div class="line">#bootctl --path=/esp update</div></pre></td></tr></table></figure>
<h4 id="编辑启动文件"><a href="#编辑启动文件" class="headerlink" title="编辑启动文件"></a>编辑启动文件</h4><p><code>#nano /esp/loader/loader.conf</code><br>​    文件中有一行注释，不需要动，直接添加如下内容即可</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">default arch-*</div><div class="line">timeout 3（这个数值可以改为 0）</div><div class="line">editor 0</div><div class="line">nano /esp/loader/entries/arch.conf`</div><div class="line">title Arch Linux</div><div class="line">linux /vmlinuz-linux</div><div class="line">initrd /initramfs-linux.img</div><div class="line">options root=PARTUUID= 14420948-2cea-4de7-b042-40f67c618660 rw</div><div class="line">使用 blkid -s PARTUUID -o value /dev/sdxY 找到某个分区的 PARTUUID, ‘x’和 ‘Y’ 分别是磁盘和分区编号（实际上这是万里长征的最后一步，但务必细心，注意是 root 分区的磁盘号，如果是按照教程来的话应该是/dev/sda2,请用笔记录，仔细校对，替换上面的14420948-2cea-4de7-b042-40f67c618660，并且注意不要忘了最后面的rw）</div></pre></td></tr></table></figure>
<h4 id="启用-ntp-自动更新时间"><a href="#启用-ntp-自动更新时间" class="headerlink" title="启用 ntp 自动更新时间"></a>启用 ntp 自动更新时间</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">#timedatectl set-ntp true</div><div class="line">#pacman -Syu （更新系统的命令，常用）</div></pre></td></tr></table></figure>
<h4 id="添加用户"><a href="#添加用户" class="headerlink" title="添加用户"></a>添加用户</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">#useradd -m X X 改成自己喜欢的名字</div><div class="line">#passwd X #设置密码</div></pre></td></tr></table></figure>
<h4 id="配置-sudo"><a href="#配置-sudo" class="headerlink" title="配置 sudo"></a>配置 sudo</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">EDITOR=nano visudo</div><div class="line">用户名添加到 root 下，格式和 root 一样</div><div class="line">形如：</div><div class="line">root ALL=(ALL) ALL</div><div class="line">X ALL=(ALL) ALL</div></pre></td></tr></table></figure>
<h4 id="安装-GNOME-（建议新手安装，原因是基础软件齐全，开箱即用，稳定高效可定制，推荐的做法是先安装gnome，熟悉之后可以替换为kde或者是xfce，xfce占用资源比较少，但是不如kde漂亮）"><a href="#安装-GNOME-（建议新手安装，原因是基础软件齐全，开箱即用，稳定高效可定制，推荐的做法是先安装gnome，熟悉之后可以替换为kde或者是xfce，xfce占用资源比较少，但是不如kde漂亮）" class="headerlink" title="安装 GNOME （建议新手安装，原因是基础软件齐全，开箱即用，稳定高效可定制，推荐的做法是先安装gnome，熟悉之后可以替换为kde或者是xfce，xfce占用资源比较少，但是不如kde漂亮）"></a>安装 GNOME （建议新手安装，原因是基础软件齐全，开箱即用，稳定高效可定制，推荐的做法是先安装gnome，熟悉之后可以替换为kde或者是xfce，xfce占用资源比较少，但是不如kde漂亮）</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">#pacman -S gnome #只安装 GNOME 的基本环境</div><div class="line">#pacman -S gedit file-roller gnome-tweak-tool p7zip #安装文本编辑器，</div></pre></td></tr></table></figure>
<h4 id="归档管理器，优化工具，7zip-解压缩支持"><a href="#归档管理器，优化工具，7zip-解压缩支持" class="headerlink" title="归档管理器，优化工具，7zip 解压缩支持"></a>归档管理器，优化工具，7zip 解压缩支持</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">#pacman -S wqy-zenhei 或者 wqy-microhei #安装文泉驿正黑字体</div><div class="line">#pacman -S ibus-rime #安装 ibus 小狼毫输入法</div></pre></td></tr></table></figure>
<h4 id="输入法配置"><a href="#输入法配置" class="headerlink" title="输入法配置"></a>输入法配置</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">#nano ./.xinitrc</div><div class="line">export LANG=zh-CN.UTF-8</div><div class="line">export GTK_IM_MODULE=ibus</div><div class="line">export QT_IM_MODULE=ibus</div><div class="line">export XMODIFIERS=&quot;@im=ibus&quot;</div></pre></td></tr></table></figure>
<h3 id="安装显卡驱动"><a href="#安装显卡驱动" class="headerlink" title="安装显卡驱动"></a>安装显卡驱动</h3><p><code>#pacman -S xf86-video-***</code> #安装显卡驱动 ati,intel,nouveau,A 卡 I 卡推荐开源驱动，N 卡推荐闭源驱动（#）</p>
<p>双显卡请按照下面指示的部分执行，替换加（#）的这步<br>双显卡看这里（特指 N 卡加 I 卡）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">#pacman -S intel-dri xf86-video-intel bumblebee nvidia</div><div class="line">#gpasswd -a X bumblebee X 指你的用户名</div></pre></td></tr></table></figure>
<p>下面几步命令相对复杂可以等有图形界面后复制粘帖<br>关闭独显：<br>下面的配置文件如果没有需要自行创建</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">#pacman -S bbswitch</div><div class="line">#nano /etc/modules-load.d/bbswitch.conf // 写入下边内容，每次启动都会加载 bbswitch 模块</div><div class="line">bbswitch</div><div class="line">#nano /etc/modprobe.d/bbswitch.conf // 写入下边内容，关闭 bbswitch 默认加载参数</div><div class="line">options bbswitch load_state=0</div><div class="line">#nano /etc/modprobe.d/nouveau_blacklist.conf</div></pre></td></tr></table></figure>
<p>写入下边内容，有时候 bbswitch 加载了，但是不能关闭显卡，因为有些模块正在占用着，因此要禁掉<br><code>blacklist nouveau</code><br><code>blacklist nvidiafb</code></p>
<p><code>#nano /usr/lib/systemd/system-shutdown/nvidia_card_enable.sh</code></p>
<p>需要运行权限，写入下边内容，每次 reboot 的时候，显卡都是关闭的，不管是重启到 windows 还是 linux，都会找不到设备，必须彻底关机才行。解决该问题的办法就是每次重启都启用显卡。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">#!/bin/bash</div><div class="line">case &quot;$1&quot; in</div><div class="line">reboot)</div><div class="line">echo &quot;Enabling NVIDIA GPU&quot;</div><div class="line">echo ON &gt; /proc/acpi/bbswitch</div><div class="line">;;</div><div class="line">*)</div><div class="line">esac</div></pre></td></tr></table></figure>
<h3 id="重启前的最后操作"><a href="#重启前的最后操作" class="headerlink" title="重启前的最后操作"></a>重启前的最后操作</h3><h4 id="可选：建立交换文件（如果内存足够大，8G-请跳过）"><a href="#可选：建立交换文件（如果内存足够大，8G-请跳过）" class="headerlink" title="可选：建立交换文件（如果内存足够大，8G+请跳过）"></a>可选：建立交换文件（如果内存足够大，8G+请跳过）</h4><h3 id="启用内核更新"><a href="#启用内核更新" class="headerlink" title="启用内核更新"></a>启用内核更新</h3><h3 id="裸机安装arch就到这里啦，下面是双系统部分"><a href="#裸机安装arch就到这里啦，下面是双系统部分" class="headerlink" title="裸机安装arch就到这里啦，下面是双系统部分"></a>裸机安装arch就到这里啦，下面是双系统部分</h3><h2 id="Windows-和-Arch-双系统部分"><a href="#Windows-和-Arch-双系统部分" class="headerlink" title="Windows 和 Arch 双系统部分"></a>Windows 和 Arch 双系统部分</h2><p>​    一般来说，大部分是已经有 windows 的情况下想要装 arch，我也推荐这种先装 windows再装 arch 的方式，先装 arch 的话因为 windows 的分区的问题会比较麻烦。下面是在已经安装 windows 的情况下安装 arch。<br>安装之前要先进入 windows 给 arch 单独分一个区。</p>
<p>​    进入arch控制台之后，输入 fdisk –l ,此时应该会有一个 efi 分区。</p>
<p><code>#mkfs.ext4 /dev/sdNX</code> 进行格式化，X 是要安装 arch 的分区（也就是windows下面搞出来的分区，找出这个分区最简单的办法是看分区大小）,N 是上面看的字母，a 或 b 或 c 等等（比方说sda1或者sdb2等等，仅作举例），<strong>对别的分区不要进行格式化</strong>（惨痛的教训）</p>
<p><code>#mount /dev/sdNX /mnt</code> 挂载根分区</p>
<p><code>#mkdir /mnt/boot</code> 创建启动分区挂载点</p>
<p><code>#mount /dev/sdNX /mnt/boot</code> 挂载启动分区 注意这个/dev/sdNX 是上面那个标示 EFI 分区的磁盘号。</p>
<p>接下来输入</p>
<p><code>#wifi-menu</code> 连接 wifi<br>     下面的步骤和上面是重复的，就是接着上面的【安装】部分一直做到配置启动之前，后面配置启动的部分不做<br>     下面注意，要进行配置启动的部分了，下面的步骤<strong>直接关系到能不能成功引导双系统</strong>。</p>
<p><code>#pacman –S grub os-prober efibootmgr</code></p>
<p><code>#grub-install --recheck /dev/sdX</code></p>
<p>​    如果提示 error: cannot find EFI directory，说明找不到 EFI 文件夹的位置，还需要加上-efi-directory 参数指明安装位置也就是下面这个命令</p>
<p><code>#grub-install --recheck /dev/sdX --efi-directory=/boot</code></p>
<p>​    如果没有错误说明安装成功。安装完毕之后还需要生成一个 grub 配置文件。这一步会探测系统上已经安装的系统并写入到配置文件中。但是由于在安装介质环境中，此时 Windows 系统可能会探测不到。等到一会重启真正进入 arch 系统之后还需要重新执行以下这个命令，这样就会正常探测到所有系统了。所以<strong>重启之后看不到windows的启动项不用担心啦</strong>。</p>
<p><code>#grub-mkconfig –o /boot/grub/grub.cfg</code> 生成配置文件</p>
<p>​    下面从上文 <strong>启用 ntp 自动更新时间</strong>一直做到<strong>重启前的最后操作</strong>这一部分然后重启。<br>​    重启之后<strong>再次执行</strong></p>
<p><code>#grub-mkconfig –o /boot/grub/grub.cfg</code> 此 时 应 该 就可以 探测 到windows 系统，后面就是一些配置了。照着上面接下来的部分接着做就行啦。</p>
<p> <strong>到此教程结束啦，撒花★,°:.☆(￣▽￣)/$:.°★*</strong></p>

      
    </div>
    
  </div>
  
    
    <div class="copyright">
        <p><span>本文标题:</span><a  href="/2017/07/17/开篇——如何安装Arch/">开篇-如何安装Arch</a></p>
        <p><span>文章作者:</span><a  href="/" title="访问 QiMeng Wang 的个人博客">QiMeng Wang</a></p>
        <p><span>发布时间:</span>2017年07月17日 - 23时32分</p>
        <p><span>最后更新:</span>2017年07月17日 - 23时41分</p>
        <p>
            <span>原始链接:</span><a class="post-url" href="/2017/07/17/开篇——如何安装Arch/" title="开篇-如何安装Arch">http://yoursite.com/2017/07/17/开篇——如何安装Arch/</a>
            <span class="copy-path" data-clipboard-text="原文: http://yoursite.com/2017/07/17/开篇——如何安装Arch/　　作者: QiMeng Wang" title=""></span>
        </p>
        <p>
            <span>许可协议:</span><i class="fa fa-creative-commons"></i> <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/cn/" title="中国大陆 (CC BY-NC-SA 3.0 CN)" target = "_blank">"署名-非商用-相同方式共享 3.0"</a> 转载请保留原文链接及作者。
        </p>
    </div>



<nav id="article-nav">
  
    <a  href="/2017/07/17/一个后台保持长连接并向服务器发送GPS信息的实现思路/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption"><</strong>
      <div class="article-nav-title">
        
          一个后台保持长连接并向服务器发送GPS信息的实现思路
        
      </div>
    </a>
  
  
    <a  href="/2017/07/17/操作系统线程调度总结/" id="article-nav-older" class="article-nav-link-wrap">
      <div class="article-nav-title">几种线程调度规则</div>
      <strong class="article-nav-caption">></strong>
    </a>
  
</nav>


  
</article>

    <div id="toc" class="toc-article">
    <strong class="toc-title">文章目录</strong>
    <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#开篇——如何安装Arch"><span class="toc-number">1.</span> <span class="toc-text">开篇——如何安装Arch</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#为什么是Arch"><span class="toc-number">1.1.</span> <span class="toc-text">为什么是Arch</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#几点建议"><span class="toc-number">1.2.</span> <span class="toc-text">几点建议</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#注"><span class="toc-number">1.3.</span> <span class="toc-text">注</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#使用说明"><span class="toc-number">1.4.</span> <span class="toc-text">使用说明</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#开始安装吧"><span class="toc-number">1.5.</span> <span class="toc-text">开始安装吧</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#准备工作"><span class="toc-number">1.5.1.</span> <span class="toc-text">准备工作</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#关闭BIOS-关闭安全启动"><span class="toc-number">1.5.1.1.</span> <span class="toc-text">关闭BIOS 关闭安全启动</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#分区"><span class="toc-number">1.5.2.</span> <span class="toc-text">分区</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#格式化"><span class="toc-number">1.5.3.</span> <span class="toc-text">格式化</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#挂载"><span class="toc-number">1.5.4.</span> <span class="toc-text">挂载</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#安装"><span class="toc-number">1.5.5.</span> <span class="toc-text">安装</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#配置"><span class="toc-number">1.5.6.</span> <span class="toc-text">配置</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#本地化设置"><span class="toc-number">1.5.6.1.</span> <span class="toc-text">本地化设置</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#时区设置"><span class="toc-number">1.5.6.2.</span> <span class="toc-text">时区设置</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#设置主机名"><span class="toc-number">1.5.7.</span> <span class="toc-text">设置主机名</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#配置启动"><span class="toc-number">1.5.8.</span> <span class="toc-text">配置启动</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#复制内核文件到-esp-分区"><span class="toc-number">1.5.8.1.</span> <span class="toc-text">复制内核文件到 esp 分区</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#安装并更新-efi-启动文件"><span class="toc-number">1.5.8.2.</span> <span class="toc-text">安装并更新 efi 启动文件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#编辑启动文件"><span class="toc-number">1.5.8.3.</span> <span class="toc-text">编辑启动文件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#启用-ntp-自动更新时间"><span class="toc-number">1.5.8.4.</span> <span class="toc-text">启用 ntp 自动更新时间</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#添加用户"><span class="toc-number">1.5.8.5.</span> <span class="toc-text">添加用户</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#配置-sudo"><span class="toc-number">1.5.8.6.</span> <span class="toc-text">配置 sudo</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#安装-GNOME-（建议新手安装，原因是基础软件齐全，开箱即用，稳定高效可定制，推荐的做法是先安装gnome，熟悉之后可以替换为kde或者是xfce，xfce占用资源比较少，但是不如kde漂亮）"><span class="toc-number">1.5.8.7.</span> <span class="toc-text">安装 GNOME （建议新手安装，原因是基础软件齐全，开箱即用，稳定高效可定制，推荐的做法是先安装gnome，熟悉之后可以替换为kde或者是xfce，xfce占用资源比较少，但是不如kde漂亮）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#归档管理器，优化工具，7zip-解压缩支持"><span class="toc-number">1.5.8.8.</span> <span class="toc-text">归档管理器，优化工具，7zip 解压缩支持</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#输入法配置"><span class="toc-number">1.5.8.9.</span> <span class="toc-text">输入法配置</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#安装显卡驱动"><span class="toc-number">1.5.9.</span> <span class="toc-text">安装显卡驱动</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#重启前的最后操作"><span class="toc-number">1.5.10.</span> <span class="toc-text">重启前的最后操作</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#可选：建立交换文件（如果内存足够大，8G-请跳过）"><span class="toc-number">1.5.10.1.</span> <span class="toc-text">可选：建立交换文件（如果内存足够大，8G+请跳过）</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#启用内核更新"><span class="toc-number">1.5.11.</span> <span class="toc-text">启用内核更新</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#裸机安装arch就到这里啦，下面是双系统部分"><span class="toc-number">1.5.12.</span> <span class="toc-text">裸机安装arch就到这里啦，下面是双系统部分</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Windows-和-Arch-双系统部分"><span class="toc-number">1.6.</span> <span class="toc-text">Windows 和 Arch 双系统部分</span></a></li></ol></li></ol>
</div>
<style>
    .left-col .switch-btn {
        display: none;
    }
    .left-col .switch-area {
        display: none;
    }
</style>
<input type="button" id="tocButton" value="隐藏目录"  title="点击按钮隐藏或者显示文章目录">
<script src="http://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js"></script>
<script>
    var valueHide = "隐藏目录";
    var valueShow = "显示目录";
    if ($(".left-col").is(":hidden")) {
        $("#tocButton").attr("value", valueShow);
    }
    $("#tocButton").click(function() {
        if ($("#toc").is(":hidden")) {
            $("#tocButton").attr("value", valueHide);
            $("#toc").slideDown(320);
            $(".switch-btn, .switch-area").fadeOut(300);
        }
        else {
            $("#tocButton").attr("value", valueShow);
            $("#toc").slideUp(350);
            $(".switch-btn, .switch-area").fadeIn(500);
        }
    })
    if ($(".toc").length < 1) {
        $("#toc, #tocButton").hide();
        $(".switch-btn, .switch-area").show();
    }
</script>




<div class="bdsharebuttonbox">
	<a href="#" class="fx fa-weibo bds_tsina" data-cmd="tsina" title="分享到新浪微博"></a>
	<a href="#" class="fx fa-weixin bds_weixin" data-cmd="weixin" title="分享到微信"></a>
	<a href="#" class="fx fa-qq bds_sqq" data-cmd="sqq" title="分享到QQ好友"></a>
	<a href="#" class="fx fa-facebook-official bds_fbook" data-cmd="fbook" title="分享到Facebook"></a>
	<a href="#" class="fx fa-twitter bds_twi" data-cmd="twi" title="分享到Twitter"></a>
	<a href="#" class="fx fa-linkedin bds_linkedin" data-cmd="linkedin" title="分享到linkedin"></a>
	<a href="#" class="fx fa-files-o bds_copy" data-cmd="copy" title="分享到复制网址"></a>
</div>
<script>window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"2","bdMiniList":false,"bdPic":"","bdStyle":"2","bdSize":"24"},"share":{}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];</script>




    
        <section class="changyan" id="comments">
  <!--<div id="uyan_frame"></div>-->
  <div id="SOHUCS"></div>
  <script charset="utf-8" type="text/javascript" src="https://changyan.sohu.com/upload/changyan.js"></script>
  <script type="text/javascript">
    window.changyan.api.config({
      appid: 'xxxx',
      conf: 'xxxxxxxxx'
    });
  </script>
</section>
    



    <div class="scroll" id="post-nav-button">
        
            <a  href="/2017/07/17/一个后台保持长连接并向服务器发送GPS信息的实现思路/" title="上一篇: 一个后台保持长连接并向服务器发送GPS信息的实现思路">
                <i class="fa fa-angle-left"></i>
            </a>
        
        <a title="文章列表"><i class="fa fa-bars"></i><i class="fa fa-times"></i></a>
        
            <a  href="/2017/07/17/操作系统线程调度总结/" title="下一篇: 几种线程调度规则">
                <i class="fa fa-angle-right"></i>
            </a>
        
    </div>
    <ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2017/07/17/Android定位总结/">Android定位总结</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/07/17/MemoryManagement/">MemoryManagement</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/07/17/一个后台保持长连接并向服务器发送GPS信息的实现思路/">一个后台保持长连接并向服务器发送GPS信息的实现思路</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/07/17/开篇——如何安装Arch/">开篇-如何安装Arch</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/07/17/操作系统线程调度总结/">几种线程调度规则</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/07/17/JVM-虚拟机类加载机制/">JVM-虚拟机类加载机制</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/07/17/JVM-运行时数据区/">JVM-运行时数据区</a></li></ul>
    <script src="http://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js"></script>
    <script>
        $(".post-list").addClass("toc-article");
        // $(".post-list-item a").attr("target","_blank");
        $("#post-nav-button > a:nth-child(2)").click(function() {
            $(".fa-bars, .fa-times").toggle();
            $(".post-list").toggle(300);
            if ($(".toc").length > 0) {
                $("#toc, #tocButton").toggle(200, function() {
                    if ($(".switch-area").is(":visible")) {
                        $("#toc, .switch-btn, .switch-area").toggle();
                        $("#tocButton").attr("value", valueHide);
                        }
                    })
            }
            else {
                $(".switch-btn, .switch-area").fadeToggle(300);
            }
        })
    </script>




    <script>
        
    </script>

</div>
      <footer id="footer">
    <div class="outer">
        <div id="footer-info">
            <div class="footer-left">
                &copy; 2017 QiMeng Wang
            </div>
            <div class="footer-right">
                <a href="http://hexo.io/" target="_blank">Hexo</a><a href="https://github.com/maochunguang" target="_blank">Blog</a> by tommy
            </div>
        </div>
        
            <div class="visit">
                
                    <span id="busuanzi_container_site_pv" style='display:none'>
                        <span id="site-visit" >极客到访数: 
                            <span id="busuanzi_value_site_uv"></span>
                        </span>
                    </span>
                
                
                    <span>, </span>
                
                
                    <span id="busuanzi_container_page_pv" style='display:none'>
                        <span id="page-visit">本页阅读量: 
                            <span id="busuanzi_value_page_pv"></span>
                        </span>
                    </span>
                
            </div>
        
    </div>
</footer>

    </div>
    <script src="http://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js"></script>
<script src="/js/main.js"></script>

    <script>
        $(document).ready(function() {
            var backgroundnum = 4;
            var backgroundimg = "url(/background/bg-x.jpg)".replace(/x/gi, Math.ceil(Math.random() * backgroundnum));
            $("#mobile-nav").css({"background-image": backgroundimg,"background-size": "cover","background-position": "center"});
            $(".left-col").css({"background-image": backgroundimg,"background-size": "cover","background-position": "center"});
        })
    </script>


<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'xxxxx', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->



	<script>
	var _hmt = _hmt || [];
	(function() {
	  var hm = document.createElement("script");
	  hm.src = "//hm.baidu.com/hm.js?xxxxxx";
	  var s = document.getElementsByTagName("script")[0]; 
	  s.parentNode.insertBefore(hm, s);
	})();
	</script>



<div class="scroll" id="scroll">
    <a href="#"><i class="fa fa-arrow-up"></i></a>
    <a href="#comments"><i class="fa fa-comments-o"></i></a>
    <a href="#footer"><i class="fa fa-arrow-down"></i></a>
</div>
<script>
    $(document).ready(function() {
        if ($("#comments").length < 1) {
            $("#scroll > a:nth-child(2)").hide();
        };
    })
</script>

<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
</script>

  <script language="javascript">
    $(function() {
        $("a[title]").each(function() {
            var a = $(this);
            var title = a.attr('title');
            if (title == undefined || title == "") return;
            a.data('title', title).removeAttr('title').hover(
            function() {
                var offset = a.offset();
                $("<div id=\"anchortitlecontainer\"></div>").appendTo($("body")).html(title).css({
                    top: offset.top - a.outerHeight() - 15,
                    left: offset.left + a.outerWidth()/2 + 1
                }).fadeIn(function() {
                    var pop = $(this);
                    setTimeout(function() {
                        pop.remove();
                    }, pop.text().length * 800);
                });
            }, function() {
                $("#anchortitlecontainer").remove();
            });
        });
    });
</script>


  </div>
</body>
</html>